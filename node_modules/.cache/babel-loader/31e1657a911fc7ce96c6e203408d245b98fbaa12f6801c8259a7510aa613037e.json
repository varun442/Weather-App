{"ast":null,"code":"import _regeneratorRuntime from\"D:/Die Trying/React/weather-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"D:/Die Trying/React/weather-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/Die Trying/React/weather-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Die Trying/React/weather-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import\"./App.css\";import CurrentWeather from\"./Components/current-weather/current-weather\";import Forecast from\"./Components/forecast-weather/forecast-weather\";import{WEATHER_API_KEY}from\"./Components/search/api\";import{WEATHER_API_URL}from\"./Components/search/api\";import Search from\"./Components/search/Search\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentWeather=_useState2[0],setCurrentWeather=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),forecastWeather=_useState4[0],setForecastWeather=_useState4[1];var onSearchChange=function onSearchChange(searchData){var _searchData$value$spl=searchData.value.split(\" \"),_searchData$value$spl2=_slicedToArray(_searchData$value$spl,2),lat=_searchData$value$spl2[0],lon=_searchData$value$spl2[1];// console.log(lat + \" \" + lon);\n// https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}\n// https://api.openweathermap.org/data/2.5/forecast?lat={lat}&lon={lon}&appid={API key}\nvar currentWeatherFetch=fetch(\"\".concat(WEATHER_API_URL,\"/weather?lat=\").concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(WEATHER_API_KEY,\"&units=metric\"));var forecastFetch=fetch(\"\".concat(WEATHER_API_URL,\"/forecast?lat=\").concat(lat,\"&lon=\").concat(lon,\"&appid=\").concat(WEATHER_API_KEY,\"&units=metric\"));// currentWeatherFetch\n//   .then((response) => {\n//     return response.json();\n//   })\n//   .then((data) => setCurrentWeather({ city: searchData.label, ...data }));\n// forecastFetch\n//   .then((response) => {\n//     return response.json();\n//   })\n//   .then((data) => setForecastWeather({ city: searchData.label, ...data }));\nPromise.all([currentWeatherFetch,forecastFetch]).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(response){var weatherResponse,forcastResponse;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return response[0].json();case 2:weatherResponse=_context.sent;_context.next=5;return response[1].json();case 5:forcastResponse=_context.sent;setCurrentWeather(_objectSpread({city:searchData.label},weatherResponse));setForecastWeather(_objectSpread({city:searchData.label},forcastResponse));case 8:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(console.log);};// console.log(currentWeather)\n// console.log(forecastWeather)\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Search,{onSearchChange:onSearchChange}),currentWeather&&/*#__PURE__*/_jsx(CurrentWeather,{data:currentWeather}),forecastWeather&&/*#__PURE__*/_jsx(Forecast,{data:forecastWeather})]});}export default App;","map":{"version":3,"names":["useState","CurrentWeather","Forecast","WEATHER_API_KEY","WEATHER_API_URL","Search","App","currentWeather","setCurrentWeather","forecastWeather","setForecastWeather","onSearchChange","searchData","value","split","lat","lon","currentWeatherFetch","fetch","forecastFetch","Promise","all","then","response","json","weatherResponse","forcastResponse","city","label","catch","console","log"],"sources":["D:/Die Trying/React/weather-app/src/App.js"],"sourcesContent":["import { useState } from \"react\";\nimport \"./App.css\";\nimport CurrentWeather from \"./Components/current-weather/current-weather\";\nimport Forecast from \"./Components/forecast-weather/forecast-weather\";\nimport { WEATHER_API_KEY } from \"./Components/search/api\";\nimport { WEATHER_API_URL } from \"./Components/search/api\";\nimport Search from \"./Components/search/Search\";\n\nfunction App() {\n  const [currentWeather, setCurrentWeather] = useState(null);\n  const [forecastWeather, setForecastWeather] = useState(null);\n\n  const onSearchChange = (searchData) => {\n    const [lat, lon] = searchData.value.split(\" \");\n    // console.log(lat + \" \" + lon);\n    // https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}\n    // https://api.openweathermap.org/data/2.5/forecast?lat={lat}&lon={lon}&appid={API key}\n    const currentWeatherFetch = fetch(\n      `${WEATHER_API_URL}/weather?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`\n    );\n    const forecastFetch = fetch(\n      `${WEATHER_API_URL}/forecast?lat=${lat}&lon=${lon}&appid=${WEATHER_API_KEY}&units=metric`\n    );\n\n    // currentWeatherFetch\n    //   .then((response) => {\n    //     return response.json();\n    //   })\n    //   .then((data) => setCurrentWeather({ city: searchData.label, ...data }));\n\n    // forecastFetch\n    //   .then((response) => {\n    //     return response.json();\n    //   })\n    //   .then((data) => setForecastWeather({ city: searchData.label, ...data }));\n\n    Promise.all([currentWeatherFetch, forecastFetch])\n      .then(async (response) => {\n        const weatherResponse = await response[0].json();\n        const forcastResponse = await response[1].json();\n\n        setCurrentWeather({ city: searchData.label, ...weatherResponse });\n        setForecastWeather({ city: searchData.label, ...forcastResponse });\n      })\n      .catch(console.log);\n  };\n  \n\n  // console.log(currentWeather)\n  // console.log(forecastWeather)\n  return (\n    <div className=\"App\">\n      <Search onSearchChange={onSearchChange} />\n      {currentWeather && <CurrentWeather data={currentWeather}/>}\n      {forecastWeather && <Forecast data={forecastWeather}/>}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"meAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAO,WAAW,CAClB,MAAOC,eAAc,KAAM,8CAA8C,CACzE,MAAOC,SAAQ,KAAM,gDAAgD,CACrE,OAASC,eAAe,KAAQ,yBAAyB,CACzD,OAASC,eAAe,KAAQ,yBAAyB,CACzD,MAAOC,OAAM,KAAM,4BAA4B,CAAC,wFAEhD,QAASC,IAAG,EAAG,CACb,cAA4CN,QAAQ,CAAC,IAAI,CAAC,wCAAnDO,cAAc,eAAEC,iBAAiB,eACxC,eAA8CR,QAAQ,CAAC,IAAI,CAAC,yCAArDS,eAAe,eAAEC,kBAAkB,eAE1C,GAAMC,eAAc,CAAG,QAAjBA,eAAc,CAAIC,UAAU,CAAK,CACrC,0BAAmBA,UAAU,CAACC,KAAK,CAACC,KAAK,CAAC,GAAG,CAAC,gEAAvCC,GAAG,2BAAEC,GAAG,2BACf;AACA;AACA;AACA,GAAMC,oBAAmB,CAAGC,KAAK,WAC5Bd,eAAe,yBAAgBW,GAAG,iBAAQC,GAAG,mBAAUb,eAAe,kBAC1E,CACD,GAAMgB,cAAa,CAAGD,KAAK,WACtBd,eAAe,0BAAiBW,GAAG,iBAAQC,GAAG,mBAAUb,eAAe,kBAC3E,CAED;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEAiB,OAAO,CAACC,GAAG,CAAC,CAACJ,mBAAmB,CAAEE,aAAa,CAAC,CAAC,CAC9CG,IAAI,4FAAC,iBAAOC,QAAQ,6KACWA,SAAQ,CAAC,CAAC,CAAC,CAACC,IAAI,EAAE,QAA1CC,eAAe,qCACSF,SAAQ,CAAC,CAAC,CAAC,CAACC,IAAI,EAAE,QAA1CE,eAAe,eAErBlB,iBAAiB,gBAAGmB,IAAI,CAAEf,UAAU,CAACgB,KAAK,EAAKH,eAAe,EAAG,CACjEf,kBAAkB,gBAAGiB,IAAI,CAAEf,UAAU,CAACgB,KAAK,EAAKF,eAAe,EAAG,CAAC,qDACpE,+DAAC,CACDG,KAAK,CAACC,OAAO,CAACC,GAAG,CAAC,CACvB,CAAC,CAGD;AACA;AACA,mBACE,aAAK,SAAS,CAAC,KAAK,wBAClB,KAAC,MAAM,EAAC,cAAc,CAAEpB,cAAe,EAAG,CACzCJ,cAAc,eAAI,KAAC,cAAc,EAAC,IAAI,CAAEA,cAAe,EAAE,CACzDE,eAAe,eAAI,KAAC,QAAQ,EAAC,IAAI,CAAEA,eAAgB,EAAE,GAClD,CAEV,CAEA,cAAeH,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}